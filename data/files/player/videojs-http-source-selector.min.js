/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/videojs-http-source-selector@1.1.6/dist/videojs-http-source-selector.es.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import e from"/npm/video.js@7.6.2/+esm";function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var n=e.getComponent("MenuItem"),l=e.getComponent("Component"),r=function(e){function o(t,o){return o.selectable=!0,o.multiSelectable=!1,e.call(this,t,o)||this}t(o,e);var n=o.prototype;return n.handleClick=function(){var t=this.options_;console.log("Changing quality to:",t.label),e.prototype.handleClick.call(this);for(var o=this.player().qualityLevels(),n=0;n<o.length;n++)t.index==o.length||t.index==n?o[n].enabled=!0:o[n].enabled=!1},n.update=function(){var e=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index==e)},o}(n);l.registerComponent("SourceMenuItem",r);var i=e.getComponent("MenuButton"),s=function(n){function l(t,l){var r;r=n.call(this,t,l)||this,i.apply(o(r),arguments);var s=r.player().qualityLevels();if(l&&l.default)if("low"==l.default)for(var a=0;a<s.length;a++)s[a].enabled=0==a;else if(l.default="high")for(a=0;a<s.length;a++)s[a].enabled=a==s.length-1;return r.player().qualityLevels().on(["change","addqualitylevel"],e.bind(o(r),r.update)),r}t(l,n);var s=l.prototype;return s.createEl=function(){return e.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},s.buildCSSClass=function(){return i.prototype.buildCSSClass.call(this)+" vjs-icon-cog"},s.update=function(){return i.prototype.update.call(this)},s.createItems=function(){for(var e=[],t=this.player().qualityLevels(),o=[],n=0;n<t.length;n++){var l=t.length-(n+1),i=l===t.selectedIndex,s=""+l,a=l;t[l].height?(s=t[l].height+"p",a=parseInt(t[l].height,10)):t[l].bitrate&&(s=Math.floor(t[l].bitrate/1e3)+" kbps",a=parseInt(t[l].bitrate,10)),o.indexOf(s)>=0||(o.push(s),e.push(new r(this.player_,{label:s,index:l,selected:i,sortVal:a})))}return t.length>1&&e.push(new r(this.player_,{label:"Auto",index:t.length,selected:!1,sortVal:99999})),e.sort((function(e,t){return e.options_.sortVal<t.options_.sortVal?1:e.options_.sortVal>t.options_.sortVal?-1:0})),e},l}(i),a={},u=e.registerPlugin||e.plugin,c=function(t){var o=this;this.ready((function(){!function(t){if(t.addClass("vjs-http-source-selector"),console.log("videojs-http-source-selector initialized!"),console.log("player.techName_:"+t.techName_),"Html5"!=t.techName_)return!1;t.on(["loadedmetadata"],(function(o){if(t.qualityLevels(),e.log("loadmetadata event"),"undefined"==t.videojs_http_source_selector_initialized||1==t.videojs_http_source_selector_initialized)console.log("player.videojs_http_source_selector_initialized == true");else{console.log("player.videojs_http_source_selector_initialized == false"),t.videojs_http_source_selector_initialized=!0;var n=t.controlBar,l=n.getChild("fullscreenToggle").el();n.el().insertBefore(n.addChild("SourceMenuButton").el(),l)}}))}(o,e.mergeOptions(a,t))})),e.registerComponent("SourceMenuButton",s),e.registerComponent("SourceMenuItem",r)};u("httpSourceSelector",c),c.VERSION="1.1.6";export{c as default};
//# sourceMappingURL=/sm/f70dc3b319077b30febd85b4bd8b5a187a0c90f12b8bdce9f5d492064f08269a.map